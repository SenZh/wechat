<!DOCTYPE html>
<html>
  <head>
    <title>page3.html</title>
	
    <meta name="keywords" content="keyword1,keyword2,keyword3">
    <meta name="description" content="this is my page">
    <meta name="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="css/weixin.css" type="text/css" />
    <script type="text/javascript" src="js/jquery.js"></script> 
	<style>
	 body{background:none;}
	 .inner-wrap{width:100%;height:667px;}
	</style>
  </head>
  
  <body>
  	<div class="inner-wrap">
    	<div class="page page3">
			<div class="chat-title">
				<div class="chat-center">
					<span class="chat-friend">王婷</span>
					<span class="pull-down"></span>
				</div>
			</div>
			<div class="chat-person">
				<div class="now-person">
				</div>
			</div>
			<div class="chat-content">
				<div class="chat-scroll" style="overflow:auto;margin: 0 20px;">
					<div class="chat-body">
						<div class="self example">
							<div class="photo"></div>
							<div class="content"></div>
						</div>
						<div class="others">
						    <div class="others-img">
								<img src="images/photo10.jpg" class="person-pic"/>
							</div>
						<div class="content">在不？</div>
						</div>
						<div class="self">
							<img src="images/small2.jpg" class="self-pic"/>
							<div class="content">在啊</div>
						</div>
						<div class="self">
							<img src="images/small2.jpg" class="self-pic"/>
							<div class="content">问你一个问题呗...</div>
						</div>
						<div class="others">
							<div class="others-img">
								<img src="images/photo1.jpg" class="person-pic"/>
							</div>
							<div class="content">问吧</div>
						</div> 
						<div class="others">
							<div class="others-img">
								<img src="images/photo7.jpg" class="person-pic"/>
							</div>
							<div class="content">什么问题？</div>
						</div>
					</div>	
					<div id="msg_end" style="height:0px;width:0px;background:red;"></div>
				</div>
			</div>
			<div class="write"  style="margin: 0 20px;">
				<div class="write-content">
					<div class="write-nav">
						<div class="opt-btn expression"></div>
						<div class="opt-btn cut"></div>
						<div class="opt-btn doc"></div>
					</div>
				</div>
				<div class="write-input">
					<textarea autofocus="autofocus"></textarea>
				</div>
				<div class="send">
					<div class="send-btn">发送</div>
					<span>按下Ctrl+Enter换行</span>
				</div>
			</div>
		</div>
	</div>
	<script>
	$(function(){
		var append_t=$(".example").clone();
	
		$(".send-btn").click(function(){
			var text_content=$(this).parents(".write").find("textarea").val();  //取出文本框中的内容
			console.log(text_content);
			if(text_content==""){	
			}else{
				$.ajax({ 
			    	type: "POST", 	
					url: "message!send.action",
					data: {
					message: text_content
				},
				dataType: "json" 
			});
			//把文本框中的内容装好，通话内容最后。
			append_t.removeClass("example").find(".content").text(text_content)
			$(".chat-body").append(append_t.clone());
			msg_end.scrollIntoView(); 
			//初始化文本框，使之内容清空，并且获取光标
			$(this).parents(".write").find("textarea").val("");
			$(this).parents(".write").find("textarea").focus();
		
		}
	});
	
	});
	</script>
  </body>
</html>
