<!DOCTYPE html>
<html>
  <head>
    <title>list3.html</title>
	
    <meta name="keywords" content="keyword1,keyword2,keyword3">
    <meta name="description" content="this is my page">
    <meta name="content-type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="js/jquery.js"></script> 
    <link rel="stylesheet" type="text/css" href="css/weixin.css">
	<style>
	 	body{background:none;}
	</style>
  </head>
  
  <body>
  	<div class="inner-wrap">
    		<div class="all-chat chat-list3">
					<div class="chat" id="model" style="display:none;">
						<a class="chat-info" target="page2.html">
							<div class="chat-pic">
								<img src="images/photo7.jpg" class="person-pic"/>
							</div>
							<div class="chat-name">王婷</div>
						</a>
					</div>
			</div>
		</div>
  </body>
  <script>
  	var chat_friend=$("#model").clone();
  	var data_=window.parent.data_all       //在小页面里面用data_
  	var arr_length=data_.length;
		for(var i=0;i<arr_length;i++){
			var friend_data=data_[i];   //把Json数组中的每个Json对象取出来
			chat_friend.find(".chat-name").text(friend_data.nick_name)
			$(".chat-list3").append(chat_friend.clone().show());
		}
	$(".chat-info").click(function(){                     //点第三个列表中的人，出现页面二，好友的详细信息。	
		var url=$(this).attr("target");
		window.parent.$("#J_page").attr("src",url); 
		
		//$(window.parent.frames["J_page"].contentWindow.document).find("body").find(".chat-title").css("background-color","red");    
		/*window.parent.$("#J_page").find(".friend-photo").html($(this).find("img").clone().css("height","110px"));
		var fri_now=$(this).find('.chat-name').text()
		window.parent.$("#J_page").find(".name-sex>.firend-name").html(fri_now);
		//为了取得好友的全部信息，先取出该好友的昵称字符串，再去查找属于data_all中的index。
		//console.log($(this).find('.chat-name').text());//取出该用户的名字，再去查找该用户的用户信息。
		for(var i=0;i<arr_length;i++){
			var friend_data=data_[i];   //把Json数组中的每个Json对象取出来
			
			if(data_[i].nick_name==fri_now){
				window.parent.$("#J_page").find("body").find(".name-sex>.firend-sex").html(data_[i].phone_Num);
				window.parent.$("#J_page").find(".xian").html(data_[i].nick_name);
			}
		}
		window.parent.$("#J_page").attr("src",url);              //这里要注意一下iframe之间的访问，同级之间要先找到父级，然后再往下找
		$(this).parent().addClass("actived");
		$(this).parent().siblings().removeClass("actived");*/
	}); 
	

	
	
	/*$(".wrap").on( "click",".chat-list3 .chat-info",function(){
		$(".page2").siblings().hide();
		//根据列表中的好友头像，改变好友详细信息中的头像
		$(".page2").find(".friend-photo").html($(this).find("img").clone().css("height","110px"));
		//根据列表中好友的昵称，修改好友详细信息中的昵称
		var fri_now=$(this).find('.chat-name').text()
		$(".page2").find(".name-sex>.firend-name").html(fri_now);
		//为了取得好友的全部信息，先取出该好友的昵称字符串，再去查找属于data_all中的index。
		//console.log($(this).find('.chat-name').text());//取出该用户的名字，再去查找该用户的用户信息。
		for(var i=0;i<arr_length;i++){
			var friend_data=data_all[i];   //把Json数组中的每个Json对象取出来
			
			if(data_all[i].nick_name==fri_now){
				$(".page2").find(".name-sex>.firend-sex").html(data_all[i].phone_Num);
				$(".page2").find(".xian").html(data_all[i].nick_name);
			}
		}
		$(".page2").show();
		$(this).parent().addClass("actived");
		$(this).parent().siblings().removeClass("actived");
	}); */
		
	//点击好友的详细信息中的  “发消息”  按钮，弹出与好友的对话框。
	$(".wrap").on( "click",".chat-button",function(){   
		$(".page3").siblings().hide();
		//把自己的头像填好
		$(".page3").find(".now-person").html($(this).parent().find("img").clone().css("height","50px"));
		//把聊天好友的头像填好
		$(".page3").find(".others-img").html($(this).parent().find("img").clone().css("height","50px"));
		//把好友的昵称放在页面上面显示
		$(".page3").find(".chat-friend").text($(this).parent().find(".name-sex>.firend-name").text());
		$(".page3").show(); 
		//can_lis=true;
		//alert(can_lis);
	}); 
  </script>
</html>
